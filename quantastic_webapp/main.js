const gordons_green = '#303531';
const dark_gordons_green = '#262926';
const light_grey_gordons_green = '#8A958C';

const jsonData = {
    "name": "Samsung Electronics",
    "prices": [
        {
            "Date": "2022-01-01",
            "Open": "79400.000000",
            "High": "79800.000000",
            "Low": "71200.000000",
            "Close": "73300.000000",
            "Adj Close": "71126.093750",
            "Volume": "267210370"
        },
        {
            "Date": "2022-01-02",
            "Open": "73300.000000",
            "High": "74000.000000",
            "Low": "70000.000000",
            "Close": "72000.000000",
            "Adj Close": "70839.546875",
            "Volume": "192147789"
        },
        {
            "Date": "2022-01-03",
            "Open": "72500.000000",
            "High": "73000.000000",
            "Low": "71000.000000",
            "Close": "71600.000000",
            "Adj Close": "70447.460938",
            "Volume": "147349185"
        },
        {
            "Date": "2022-01-04",
            "Open": "71700.000000",
            "High": "72500.000000",
            "Low": "70500.000000",
            "Close": "72100.000000",
            "Adj Close": "70942.546875",
            "Volume": "176283962"
        },
        {
            "Date": "2022-01-05",
            "Open": "72200.000000",
            "High": "73600.000000",
            "Low": "71200.000000",
            "Close": "72800.000000",
            "Adj Close": "71634.132813",
            "Volume": "201920134"
        },
        {
            "Date": "2022-01-06",
            "Open": "72600.000000",
            "High": "73200.000000",
            "Low": "71100.000000",
            "Close": "71600.000000",
            "Adj Close": "70447.460938",
            "Volume": "163548210"
        },
        {
            "Date": "2022-01-07",
            "Open": "71700.000000",
            "High": "72400.000000",
            "Low": "71100.000000",
            "Close": "71400.000000",
            "Adj Close": "70249.570313",
            "Volume": "127841978"
        },
        {
            "Date": "2022-01-08",
            "Open": "71300.000000",
            "High": "71900.000000",
            "Low": "70300.000000",
            "Close": "70700.000000",
            "Adj Close": "69558.320313",
            "Volume": "131749376"
        },
        {
            "Date": "2022-01-09",
            "Open": "70900.000000",
            "High": "71600.000000",
            "Low": "70300.000000",
            "Close": "71200.000000",
            "Adj Close": "70054.843750",
            "Volume": "94672847"
        },
        {
            "Date": "2022-01-10",
            "Open": "71600.000000",
            "High": "72300.000000",
            "Low": "70400.000000",
            "Close": "71500.000000",
            "Adj Close": "70353.437500",
            "Volume": "124187876"
        },
        {
            "Date": "2022-01-11",
            "Open": "71800.000000",
            "High": "72500.000000",
            "Low": "70600.000000",
            "Close": "72200.000000",
            "Adj Close": "71042.546875",
            "Volume": "158429317"
        },
        {
            "Date": "2022-01-12",
            "Open": "72200.000000",
            "High": "73100.000000",
            "Low": "71000.000000",
            "Close": "72000.000000",
            "Adj Close": "70839.546875",
            "Volume": "142806210"
        },
        {
            "Date": "2022-01-13",
            "Open": "72000.000000",
            "High": "73000.000000",
            "Low": "71200.000000",
            "Close": "72500.000000",
            "Adj Close": "71334.812500",
            "Volume": "131678829"
        },
        {
            "Date": "2022-01-14",
            "Open": "72200.000000",
            "High": "72500.000000",
            "Low": "70400.000000",
            "Close": "71200.000000",
            "Adj Close": "70054.843750",
            "Volume": "113248129"
        },
        {
            "Date": "2022-01-15",
            "Open": "71400.000000",
            "High": "72100.000000",
            "Low": "70500.000000",
            "Close": "71800.000000",
            "Adj Close": "70649.570313",
            "Volume": "92991403"
        },
        {
            "Date": "2022-01-16",
            "Open": "71600.000000",
            "High": "72500.000000",
            "Low": "71000.000000",
            "Close": "72200.000000",
            "Adj Close": "71042.546875",
            "Volume": "104832156"
        },
        {
            "Date": "2022-01-17",
            "Open": "72100.000000",
            "High": "72900.000000",
            "Low": "71200.000000",
            "Close": "72500.000000",
            "Adj Close": "71334.812500",
            "Volume": "134754920"
        },
        {
            "Date": "2022-01-18",
            "Open": "72600.000000",
            "High": "73400.000000",
            "Low": "71700.000000",
            "Close": "72900.000000",
            "Adj Close": "71727.187500",
            "Volume": "155430182"
        },
        {
            "Date": "2022-01-19",
            "Open": "72700.000000",
            "High": "73400.000000",
            "Low": "72000.000000",
            "Close": "72800.000000",
            "Adj Close": "71634.132813",
            "Volume": "143679714"
        },
        {
            "Date": "2022-01-20",
            "Open": "72700.000000",
            "High": "73500.000000",
            "Low": "72100.000000",
            "Close": "73000.000000",
            "Adj Close": "71828.320313",
            "Volume": "132396497"
        },
        {
            "Date": "2022-01-21",
            "Open": "72600.000000",
            "High": "73200.000000",
            "Low": "72000.000000",
            "Close": "72400.000000",
            "Adj Close": "71249.570313",
            "Volume": "110379015"
        },
        {
            "Date": "2022-01-22",
            "Open": "72300.000000",
            "High": "73000.000000",
            "Low": "71200.000000",
            "Close": "72100.000000",
            "Adj Close": "70942.546875",
            "Volume": "94526159"
        },
        {
            "Date": "2022-01-23",
            "Open": "72500.000000",
            "High": "73200.000000",
            "Low": "71700.000000",
            "Close": "72600.000000",
            "Adj Close": "71434.812500",
            "Volume": "106532451"
        },
        {
            "Date": "2022-01-24",
            "Open": "72100.000000",
            "High": "73000.000000",
            "Low": "71000.000000",
            "Close": "72800.000000",
            "Adj Close": "71634.132813",
            "Volume": "120458134"
        },
        {
            "Date": "2022-01-25",
            "Open": "72600.000000",
            "High": "73400.000000",
            "Low": "71700.000000",
            "Close": "72500.000000",
            "Adj Close": "71334.812500",
            "Volume": "134683728"
        },
        {
            "Date": "2022-01-26",
            "Open": "72800.000000",
            "High": "73600.000000",
            "Low": "72100.000000",
            "Close": "73000.000000",
            "Adj Close": "71828.320313",
            "Volume": "147243119"
        },
        {
            "Date": "2022-01-27",
            "Open": "72900.000000",
            "High": "73600.000000",
            "Low": "72200.000000",
            "Close": "72900.000000",
            "Adj Close": "71727.187500",
            "Volume": "128750104"
        },
        {
            "Date": "2022-01-28",
            "Open": "72700.000000",
            "High": "73400.000000",
            "Low": "72100.000000",
            "Close": "72800.000000",
            "Adj Close": "71634.132813",
            "Volume": "111892776"
        },
        {
            "Date": "2022-01-29",
            "Open": "72400.000000",
            "High": "73200.000000",
            "Low": "71800.000000",
            "Close": "72700.000000",
            "Adj Close": "71541.070313",
            "Volume": "101246428"
        },
        {
            "Date": "2022-01-30",
            "Open": "72800.000000",
            "High": "73600.000000",
            "Low": "72200.000000",
            "Close": "73200.000000",
            "Adj Close": "72033.835938",
            "Volume": "103857649"
        },
        {
            "Date": "2022-01-31",
            "Open": "73200.000000",
            "High": "74000.000000",
            "Low": "72400.000000",
            "Close": "73400.000000",
            "Adj Close": "72225.898438",
            "Volume": "132462415"
        },
        {
            "Date": "2022-02-01",
            "Open": "74900.000000",
            "High": "75800.000000",
            "Low": "71300.000000",
            "Close": "71900.000000",
            "Adj Close": "69767.609375",
            "Volume": "161403414"
        },
        {
            "Date": "2022-02-02",
            "Open": "74800.000000",
            "High": "75400.000000",
            "Low": "74200.000000",
            "Close": "74600.000000",
            "Adj Close": "72963.375000",
            "Volume": "112358255"
        },
        {
            "Date": "2022-02-03",
            "Open": "74700.000000",
            "High": "75300.000000",
            "Low": "73800.000000",
            "Close": "74600.000000",
            "Adj Close": "72963.375000",
            "Volume": "130285037"
        },
        {
            "Date": "2022-02-04",
            "Open": "74500.000000",
            "High": "75600.000000",
            "Low": "74200.000000",
            "Close": "75400.000000",
            "Adj Close": "73745.382813",
            "Volume": "136763528"
        },
        {
            "Date": "2022-02-05",
            "Open": "75100.000000",
            "High": "75700.000000",
            "Low": "74600.000000",
            "Close": "75300.000000",
            "Adj Close": "73646.445313",
            "Volume": "128538712"
        },
        {
            "Date": "2022-02-06",
            "Open": "75000.000000",
            "High": "75800.000000",
            "Low": "74300.000000",
            "Close": "75100.000000",
            "Adj Close": "73448.320313",
            "Volume": "118921418"
        },
        {
            "Date": "2022-02-07",
            "Open": "75000.000000",
            "High": "75800.000000",
            "Low": "74300.000000",
            "Close": "75200.000000",
            "Adj Close": "73547.257813",
            "Volume": "126284741"
        },
        {
            "Date": "2022-02-08",
            "Open": "75300.000000",
            "High": "76000.000000",
            "Low": "74500.000000",
            "Close": "75600.000000",
            "Adj Close": "73941.195313",
            "Volume": "132432917"
        },
        {
            "Date": "2022-02-09",
            "Open": "75900.000000",
            "High": "76700.000000",
            "Low": "75000.000000",
            "Close": "76000.000000",
            "Adj Close": "74335.132813",
            "Volume": "143978592"
        },
        {
            "Date": "2022-02-10",
            "Open": "75900.000000",
            "High": "76700.000000",
            "Low": "75000.000000",
            "Close": "76200.000000",
            "Adj Close": "74532.320313",
            "Volume": "125483691"
        },
        {
            "Date": "2022-02-11",
            "Open": "76200.000000",
            "High": "76900.000000",
            "Low": "75200.000000",
            "Close": "76500.000000",
            "Adj Close": "74826.257813",
            "Volume": "132526719"
        },
        {
            "Date": "2022-02-12",
            "Open": "76800.000000",
            "High": "77400.000000",
            "Low": "75900.000000",
            "Close": "76700.000000",
            "Adj Close": "75023.445313",
            "Volume": "118637912"
        },
        {
            "Date": "2022-02-13",
            "Open": "76700.000000",
            "High": "77500.000000",
            "Low": "75900.000000",
            "Close": "77300.000000",
            "Adj Close": "75613.695313",
            "Volume": "119578214"
        },
        {
            "Date": "2022-02-14",
            "Open": "77000.000000",
            "High": "77800.000000",
            "Low": "76300.000000",
            "Close": "77100.000000",
            "Adj Close": "75415.570313",
            "Volume": "135617203"
        },
        {
            "Date": "2022-02-15",
            "Open": "77000.000000",
            "High": "77800.000000",
            "Low": "76300.000000",
            "Close": "77200.000000",
            "Adj Close": "75514.507813",
            "Volume": "125378431"
        },
        {
            "Date": "2022-02-16",
            "Open": "76900.000000",
            "High": "77700.000000",
            "Low": "76200.000000",
            "Close": "77000.000000",
            "Adj Close": "75316.382813",
            "Volume": "118274633"
        },
        {
            "Date": "2022-02-17",
            "Open": "76700.000000",
            "High": "77500.000000",
            "Low": "76000.000000",
            "Close": "77400.000000",
            "Adj Close": "75712.320313",
            "Volume": "127342315"
        },
        {
            "Date": "2022-02-18",
            "Open": "77100.000000",
            "High": "77900.000000",
            "Low": "76400.000000",
            "Close": "77700.000000",
            "Adj Close": "76006.257813",
            "Volume": "124647222"
        },
        {
            "Date": "2022-02-19",
            "Open": "77300.000000",
            "High": "78100.000000",
            "Low": "76600.000000",
            "Close": "78000.000000",
            "Adj Close": "76299.507813",
            "Volume": "114824219"
        },
        {
            "Date": "2022-02-20",
            "Open": "77700.000000",
            "High": "78500.000000",
            "Low": "77000.000000",
            "Close": "78200.000000",
            "Adj Close": "76496.695313",
            "Volume": "125446217"
        },
        {
            "Date": "2022-02-21",
            "Open": "78100.000000",
            "High": "78900.000000",
            "Low": "77400.000000",
            "Close": "78300.000000",
            "Adj Close": "76595.632813",
            "Volume": "117995721"
        },
        {
            "Date": "2022-02-22",
            "Open": "78200.000000",
            "High": "79000.000000",
            "Low": "77500.000000",
            "Close": "78500.000000",
            "Adj Close": "76792.820313",
            "Volume": "128643515"
        },
        {
            "Date": "2022-02-23",
            "Open": "78300.000000",
            "High": "79100.000000",
            "Low": "77600.000000",
            "Close": "78700.000000",
            "Adj Close": "76990.007813",
            "Volume": "122875421"
        },
        {
            "Date": "2022-02-24",
            "Open": "78700.000000",
            "High": "79500.000000",
            "Low": "78000.000000",
            "Close": "78900.000000",
            "Adj Close": "77187.195313",
            "Volume": "134121573"
        },
        {
            "Date": "2022-02-25",
            "Open": "78800.000000",
            "High": "79600.000000",
            "Low": "78100.000000",
            "Close": "79100.000000",
            "Adj Close": "77384.382813",
            "Volume": "116840622"
        },
        {
            "Date": "2022-02-26",
            "Open": "79100.000000",
            "High": "79900.000000",
            "Low": "78400.000000",
            "Close": "79300.000000",
            "Adj Close": "77581.570313",
            "Volume": "127519527"
        },
        {
            "Date": "2022-02-27",
            "Open": "79200.000000",
            "High": "80000.000000",
            "Low": "78500.000000",
            "Close": "79500.000000",
            "Adj Close": "77778.757813",
            "Volume": "119376428"
        },
        {
            "Date": "2022-02-28",
            "Open": "79500.000000",
            "High": "80300.000000",
            "Low": "78800.000000",
            "Close": "79700.000000",
            "Adj Close": "77975.945313",
            "Volume": "130240643"
        },
        {
            "Date": "2022-03-01",
            "Open": "79000.000000",
            "High": "79500.000000",
            "Low": "78000.000000",
            "Close": "78500.000000",
            "Adj Close": "76792.820313",
            "Volume": "128643515"
        },
        {
            "Date": "2022-03-02",
            "Open": "78400.000000",
            "High": "79100.000000",
            "Low": "77500.000000",
            "Close": "78200.000000",
            "Adj Close": "76496.695313",
            "Volume": "125446217"
        },
        {
            "Date": "2022-03-03",
            "Open": "78500.000000",
            "High": "79000.000000",
            "Low": "77600.000000",
            "Close": "78700.000000",
            "Adj Close": "76990.007813",
            "Volume": "122875421"
        },
        {
            "Date": "2022-03-04",
            "Open": "78300.000000",
            "High": "78800.000000",
            "Low": "77200.000000",
            "Close": "78000.000000",
            "Adj Close": "76299.507813",
            "Volume": "114824219"
        },
        {
            "Date": "2022-03-05",
            "Open": "78500.000000",
            "High": "79200.000000",
            "Low": "77700.000000",
            "Close": "78900.000000",
            "Adj Close": "77187.195313",
            "Volume": "134121573"
        },
        {
            "Date": "2022-03-06",
            "Open": "78800.000000",
            "High": "79300.000000",
            "Low": "77900.000000",
            "Close": "78200.000000",
            "Adj Close": "76496.695313",
            "Volume": "116840622"
        },
        {
            "Date": "2022-03-07",
            "Open": "78100.000000",
            "High": "78900.000000",
            "Low": "77400.000000",
            "Close": "78300.000000",
            "Adj Close": "76595.632813",
            "Volume": "117995721"
        },
        {
            "Date": "2022-03-08",
            "Open": "78500.000000",
            "High": "79200.000000",
            "Low": "77700.000000",
            "Close": "78000.000000",
            "Adj Close": "76299.507813",
            "Volume": "114824219"
        },
        {
            "Date": "2022-03-09",
            "Open": "78400.000000",
            "High": "79000.000000",
            "Low": "77500.000000",
            "Close": "78900.000000",
            "Adj Close": "77187.195313",
            "Volume": "134121573"
        },
        {
            "Date": "2022-03-10",
            "Open": "78800.000000",
            "High": "79300.000000",
            "Low": "77900.000000",
            "Close": "78200.000000",
            "Adj Close": "76496.695313",
            "Volume": "116840622"
        },
        {
            "Date": "2022-03-11",
            "Open": "78100.000000",
            "High": "78900.000000",
            "Low": "77400.000000",
            "Close": "78300.000000",
            "Adj Close": "76595.632813",
            "Volume": "117995721"
        },
        {
            "Date": "2022-03-12",
            "Open": "78500.000000",
            "High": "79200.000000",
            "Low": "77700.000000",
            "Close": "78000.000000",
            "Adj Close": "76299.507813",
            "Volume": "114824219"
        },
        {
            "Date": "2022-03-13",
            "Open": "78400.000000",
            "High": "79000.000000",
            "Low": "77500.000000",
            "Close": "78900.000000",
            "Adj Close": "77187.195313",
            "Volume": "134121573"
        },
        {
            "Date": "2022-03-14",
            "Open": "78800.000000",
            "High": "79300.000000",
            "Low": "77900.000000",
            "Close": "78200.000000",
            "Adj Close": "76496.695313",
            "Volume": "116840622"
        },
        {
            "Date": "2022-03-15",
            "Open": "78100.000000",
            "High": "78900.000000",
            "Low": "77400.000000",
            "Close": "78300.000000",
            "Adj Close": "76595.632813",
            "Volume": "117995721"
        },
        {
            "Date": "2022-03-16",
            "Open": "78500.000000",
            "High": "79200.000000",
            "Low": "77700.000000",
            "Close": "78000.000000",
            "Adj Close": "76299.507813",
            "Volume": "114824219"
        },
        {
            "Date": "2022-03-17",
            "Open": "78400.000000",
            "High": "79000.000000",
            "Low": "77500.000000",
            "Close": "78900.000000",
            "Adj Close": "77187.195313",
            "Volume": "134121573"
        },
        {
            "Date": "2022-03-18",
            "Open": "78800.000000",
            "High": "79300.000000",
            "Low": "77900.000000",
            "Close": "78200.000000",
            "Adj Close": "76496.695313",
            "Volume": "116840622"
        },
        {
            "Date": "2022-03-19",
            "Open": "78100.000000",
            "High": "78900.000000",
            "Low": "77400.000000",
            "Close": "78300.000000",
            "Adj Close": "76595.632813",
            "Volume": "117995721"
        },
        {
            "Date": "2022-03-20",
            "Open": "78500.000000",
            "High": "79200.000000",
            "Low": "77700.000000",
            "Close": "78000.000000",
            "Adj Close": "76299.507813",
            "Volume": "114824219"
        },
        {
            "Date": "2022-03-21",
            "Open": "78400.000000",
            "High": "79000.000000",
            "Low": "77500.000000",
            "Close": "78900.000000",
            "Adj Close": "77187.195313",
            "Volume": "134121573"
        },
        {
            "Date": "2022-03-22",
            "Open": "78800.000000",
            "High": "79300.000000",
            "Low": "77900.000000",
            "Close": "78200.000000",
            "Adj Close": "76496.695313",
            "Volume": "116840622"
        },
        {
            "Date": "2022-03-23",
            "Open": "78100.000000",
            "High": "78900.000000",
            "Low": "77400.000000",
            "Close": "78300.000000",
            "Adj Close": "76595.632813",
            "Volume": "117995721"
        },
        {
            "Date": "2022-03-24",
            "Open": "78500.000000",
            "High": "79200.000000",
            "Low": "77700.000000",
            "Close": "78000.000000",
            "Adj Close": "76299.507813",
            "Volume": "114824219"
        },
        {
            "Date": "2022-03-25",
            "Open": "78400.000000",
            "High": "79000.000000",
            "Low": "77500.000000",
            "Close": "78900.000000",
            "Adj Close": "77187.195313",
            "Volume": "134121573"
        },
        {
            "Date": "2022-03-26",
            "Open": "78800.000000",
            "High": "79300.000000",
            "Low": "77900.000000",
            "Close": "78200.000000",
            "Adj Close": "76496.695313",
            "Volume": "116840622"
        },
        {
            "Date": "2022-03-27",
            "Open": "78100.000000",
            "High": "78900.000000",
            "Low": "77400.000000",
            "Close": "78300.000000",
            "Adj Close": "76595.632813",
            "Volume": "117995721"
        },
        {
            "Date": "2022-03-28",
            "Open": "78500.000000",
            "High": "79200.000000",
            "Low": "77700.000000",
            "Close": "78000.000000",
            "Adj Close": "76299.507813",
            "Volume": "114824219"
        },
        {
            "Date": "2022-03-29",
            "Open": "78400.000000",
            "High": "79000.000000",
            "Low": "77500.000000",
            "Close": "78900.000000",
            "Adj Close": "77187.195313",
            "Volume": "134121573"
        },
        {
            "Date": "2022-03-30",
            "Open": "78800.000000",
            "High": "79300.000000",
            "Low": "77900.000000",
            "Close": "78200.000000",
            "Adj Close": "76496.695313",
            "Volume": "116840622"
        },
        {
            "Date": "2022-03-31",
            "Open": "78100.000000",
            "High": "78900.000000",
            "Low": "77400.000000",
            "Close": "78300.000000",
            "Adj Close": "76595.632813",
            "Volume": "117995721"
        }
    ]
};

/* TODO: Use online stock data, or custom JSON file*/

const dates = jsonData.prices.map(price => price.Date);
const opens = jsonData.prices.map(price => parseFloat(price.Open));
const highs = jsonData.prices.map(price => parseFloat(price.High));
const lows = jsonData.prices.map(price => parseFloat(price.Low));
const closes = jsonData.prices.map(price => parseFloat(price.Close));

const trace = {
    x: dates,
    close: closes,
    high: highs,
    low: lows,
    open: opens,
    increasing: {
        line: {color: '#53b18c'},
        fillcolor: '#53b18c'
    },
    decreasing: {
        line: {color: '#FF4136'},
        fillcolor: '#FF4136'
    },
    type: 'candlestick',
};

const layout = {
    paper_bgcolor: 'rgba(0, 0, 0, 0)',
    plot_bgcolor: 'rgba(0, 0, 0, 0)',
    font: {
        color: '#FCFCFC',
    },
    dragmode: 'pan',
    margin: {
        r: 40,
        t: 20,
        b: 45,
        l: 30
    },
    xaxis: {
        autorange: true,
        rangeslider: {
            visible: false
        },
        showgrid: true,
        gridcolor: '#525953',
    },
    yaxis: {
        autorange: true,
        dtick: 1000,
        gridcolor: '#525953',
        side: 'right'
    },
};

const data = [trace];

Plotly.newPlot('candlestick-chart', data, layout);

/* Get Data Input */

const startDateInput = document.getElementById('date-start');
const endDateInput = document.getElementById('date-end');
//const testOut = document.getElementById('test');

console.log(startDateInput.value);
console.log(endDateInput.value);

const dateInputHandler = function(event) {
    //testOut.innerHTML = event.target.value;
    console.log(event.target.value);
    console.log('Start Date Changed: ' + startDateInput.value);
    console.log('End Date Changed: ' + endDateInput.value);



    //const newDates = (startDateInput.value, endDateInput.value);
}

startDateInput.addEventListener('change', dateInputHandler);
endDateInput.addEventListener('change', dateInputHandler);


//TODO : MAke graph update based on start and end date
/*
const updateDate = function(event) {
    
}
*/

/* Get Type input */

const typeInput = document.getElementById('type');
console.log(typeInput.value);

const typeInputHandler = function(event) {
    console.log(event.target.value);
    console.log('Type Changed: ' + typeInput.value);
}

typeInput.addEventListener('change', typeInputHandler);

/* Get Slider Input */

const sliderInput = document.querySelector("input[name=checkbox]");
console.log(sliderInput.checked);

const sliderInputHandler = function(event) {
    if(this.checked) {
        console.log(sliderInput.checked + ": Set to Low");
    } else {
        console.log(sliderInput.checked + ": Set to High");
    }
}

sliderInput.addEventListener('change', sliderInputHandler);

/* Get Percent Input */

const percentInput = document.getElementById('percent');
console.log(percentInput.value);

const percentInputHandler = function(event) {
    console.log(event.target.value);
    console.log('Percent Input Changed: ' + percentInput.value);
}

percentInput.addEventListener('change', percentInputHandler);

/*
 ISSUE: percent input reinitializes webpage when pressing ENTER, but changing the input works
     WORKAROUND: Disable ENTER key -- event.keyCode != 13
 ISSUE: after giving input of 3 digits AND >100 --> can no longer change text, can only change after erasing all of text
*/


/* Button Listeners */

const watchlistEventListener = document.getElementById('watchlist_toggle');

var showWatchlist = true;
const dataDiv = document.querySelector('.visualized-data');

const watchlistInputHandler = function(event) {
    /*TODO: toggle watchlist*/
    /*change candlestick-chart top=50%, max-height=700px*/
    /*change data-table dislplay to none*/
    /*candlestick-chart.maximized*/
    /*data-table-rect.hide*/

    showWatchlist = !(showWatchlist);
    console.log(showWatchlist);
    console.log("Watchlist Toggle Pressed");


    if (showWatchlist == false) {
        Array.from(dataDiv.children).forEach(childDiv => {
            childDiv.classList.remove('candlestick-chart');
            childDiv.classList.remove('data-table');
            childDiv.removeAttribute('data-table-rect');
            childDiv.removeAttribute('data-table-chart');
            childDiv.id = 'candlestick-chart-maximized';
        });
    }
    else if (showWatchlist == true) {
        Array.from(dataDiv.children).forEach(childDiv => {
            childDiv.classList.remove('candlestick-chart-maximized');
            childDiv.id = 'candlestick-chart';
        })
        const newDiv = document.createElement('div');
        newDiv.classList.add('data-table');
        newDiv.classList.add('data-table-rect');
        newDiv.classList.add('data-table-chart');
        dataDiv.appendChild(newDiv);
    }
}

watchlistEventListener.addEventListener('click', watchlistInputHandler);

/* TODO: Data Table 구현 */

var dataTableValues = [
    ['<b>Samsung Electronics</b>', '<b>Coupang</b>', '<b>NAVER</b>', '<b>Kakao</b>', '<b>Smilegates</b>'],
    [1200000, 20000, 80000, 2000, 12120000],
    [1300000, 20000, 70000, 2000, 130902000],
    [1300000, 20000, 70000, 2000, 130902000],
    [1300000, 20000, 70000, 2000, 130902000],
    [1300000, 20000, 70000, 2000, 130902000]
]

var dataTableData = [{
    type: 'table',
    header: {
        values: [["<b>INDEX</b>"], ["<b>NAME</b>"], ["<b>VOLUME</b>"], ["<b>LAST</b>"],
                    ["<b>CHANGE(AMT)</b>"], ["<b>CHANGE(%)</b>"]],
        align: ["left", "left"],
        line: {width: 1, color: dark_gordons_green},
        fill: {color: dark_gordons_green},
        font: {family: "Droid Sans", size: 12, color: "white"}
    },
    cells: {
        values: dataTableValues,
        align: ["left", "left"],
        line: {color: dark_gordons_green, width: 1},
        fill: {color: [dark_gordons_green, dark_gordons_green]},
        font: {family: "Droid Sans", size: 11, color: [light_grey_gordons_green]}
    }
}]

var dataTableLayout = {
    paper_bgcolor: 'rgba(0,0,0,0)',
    margin: {
        r: 20,
        t: 0,
        b: 0,
        l: 20,
    },
}

Plotly.newPlot('data-table-chart', dataTableData, dataTableLayout);

